<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<TITLE>Old programmer's cry</TITLE>
<style type="text/css">
   BODY {font-family:Arial; font-size:10pt; margin-left:10;margin-right:10} 
   TD {font-family:Arial; font-size:10pt}
   P {font-family:Arial; font-size:10pt; text-align:justify}
   LI {font-family:Arial; font-size:10pt}
   UL {font-family:Arial; font-size:10pt}   
   PRE {font-family:Tahoma; font-size:10pt}
   STRONG  {font-family:Arial; font-size:10pt}
   CENTER {font-family:Arial; font-size:10pt}
</style>    
</head>

<body>
<table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td width="15%" height="25" bgcolor="teal"></td>
    <td width="70%" height="25" bgcolor="teal"></td>
    <td width="15%" height="25" bgcolor="teal"></td>
</tr>
<tr>
    <td width="15%" height="50"></td>
    <td width="70%" height="50" align="center"><b><font face="arial black" size="+4" color="Teal">DRMADСКОЕ БАРАХЛО</font></b></td>
    <td width="15%" height="50"></td>
</tr>
<tr>
    <td width="15%" height="25" bgcolor="teal"></td>
    <td width="70%" height="25" bgcolor="teal"></td>
    <td width="15%" height="25" bgcolor="teal"></td>
</tr>
<tr>
    <td width="15%" height="25" bgcolor="#60C0C0"></td>
    <td width="70%" height="25" bgcolor="#60C0C0"></td>
    <td width="15%" height="25" bgcolor="#60C0C0"></td>
</tr>
<tr>
    <td width="15%" height="100%" bgcolor="#60C0C0"></td>
    <td width="70%" height="100%">
    
    <table border="0" bordercolor="teal" width="100%" height="100%" cellpadding="10">
    <tr>
    <td>
    
    <!--->  

<TABLE ALIGN=CENTER CELLPADDING=0 BGCOLOR="Teal" WIDTH="100%">
<TR>
<TH>
 <FONT SIZE=+3 COLOR="White">
    Новые советы вирмерам-недоучкам <br>
    <font face="" size="-1">(Земский Фершал, №1)  </font>              
</FONT>
</TH>
</TR>
</TABLE>                    

<br><a href="index.html"><img src="back.gif"></a><br>

<table>
<tr>
<td width="50%"></td>
<td width="50%">
"Вероятно, во сне я бессознательно 
произнес   формулу материализации 
и нечаянно вызвал из небытия это 
угрюмое животное. Загнать его обратно 
в  небытие мне не удалось..."<br>
А. и Б. Стругацкие
</td>
</tr>
</table> 
       
<p>    Через мои руки прошло не так уж много  вирусов.  Но  ковыряться 
в их потрохах - одно из моих любимых занятий.
</p>
<p>
    Встречаясь с каждым новым представителем электронной  микрофлоры 
    и микрофауны, я невольно сравниваю его с ранее изученными образцами.  И прихожу к неутешительному выводу:  несмотря
на то,  что  в  "лице лучших своих представителей" современные
вирусы далеко ушли от "студенческих" поделок,  но качество общей массы оставляет желать лучшего.
</p>
 <p>   Не буду здесь останавливаться на юридических и/или моральных аспектах  вирусописательства.  Отмечу  только  неоспоримый
факт:  чем  грубей  и примитивней алгоритм вируса,  тем больше
вреда этот вирус приносит.
</p>
<p>
    Много лет тому назад (  в  1992  году  )  Вадим  Богданов,
"продвигая" свой антивирус antiape,  создал любопытный и очень
поучительный документ:  "Несколько советов авторам вирусов". С
тех пор немало воды утекло... На мой взгляд, назрела необходимость несколько дополнить этот документ.
</p>

<p>
    Итак...
</p>

<p>
    0. Если Вы уж пишете вирусы (что само по себе не так  уж и
плохо и порой даже занимательно :-)) и даже распространяете их
(что гораздо хуже и заслуживает,  как минимум,  порицания), то
уж постарайтесь,  чтобы Ваши "чада" причиняли как можно меньше
вреда.  Помните: <strong>хороший вирус - это тот, который трудно заподозрить,  
заподозрив - трудно выделить, выделив - трудно излечить, излечив - трудно забыть</strong>. 
Постарайтесь удивить своим умением  писать  качественные вирусы (если уж больше ничем другим
удивить не можете :-( ) , а не заставить себя проклинать.
</p>
<p>
    1. Большинство вирусов пишутся в предположении их работы в
DOS, в то время как большая часть пользователей некоторое время назад перешла на работу под различные варианты Windows, OS/
2 и пр. Проверяйте, в какой среде Вы работаете, например, так:
</p>
 <pre>
    mov  ax, 1600h
    int  2Fh
    or   al,al
    jz   NoWindows
    ...
</pre>
<p>
    Если вирус обнаруживает, что зараженная им программа стартует из под Windows,  то самое лучшее,  что он может сделать -
мирно передать управление оригинальному коду.  И уж ни в  коем
случае не пытаться остаться резидентно в памяти, рисовать картинки, играть музыку и пр.
</p>
<p>
<i>
    (Фролов А.В.,  Фролов Г.В.  Защищенный  режим  процессоров
Intel 80286/80386/80486.-М.: "ДИАЛОГ-МИФИ", 1993.)
</i>
</p>
<p>
    2. Большинство потенциальных  жертв  вирусов  также  могут
оказаться программами в формате Windows.  Будучи заражены, такие 
программы, не исключено, начнут при работе "глючить". Проверяйте,  
какой именно файл Вы пытаетесь заразить:  если слово
по смещению 0х18 в заголовке  ЕХЕ-программ  содержит  значение
0х40 или больше, то такую программу лучше не трогать.
</p>

 <i>   
 (Сван Т. Форматы файлов Windows. М.: Бином, 1995.)
</i>

 <p>   
3. Авторам  загрузочных вирусов.  Перед тем,  как записать
свой код в boot-сектор дискеты или mbr  винчестера, убедитесь,
что там располагается "настоящий" загрузчик. Вы ведь все равно
прочитаете этот сектор,  чтобы "спрятать" его в другое  место,
так уж  потратьте несколько команд на проверку,  например,  по
первым байтам:
</p>

<pre>
    cmp  word ptr es:[bx], 33FAh
    jnz  SkipInfect
    ...
</pre>
<p>
    Если Вы не сделаете этого,  то можете "угодить" на  другой
вирус,  который  обосновался  там раньше Вас.  Весьма вероятен
случай, когда Ваше "произведение" и "произведение" Вашего коллеги 
используют для своих нужд одни и те же сектора 0-й дорожки винчестера 
(например, 0/0/7).
</p>
<p>
    Кроме того,  на  компьютере может быть установлена нестандартная 
    конфигурация программного обеспечения, например, драйвер ADM, 
    чей код также располагается на 0-й дорожке.
</p>
<p>
    Результат и  в  том и в другом случае очевиден:  компьютер
зависнет при загрузке :-(.
</p>
<p>
    4. Авторам  полиморфных вирусов.  А не забываете ли вы про
такую простую вещь,  как "очередь команд" в процессорах  фирмы
Intel? Длина очереди в буфере команд постоянно возрастает пропорционально 
номеру версии процессора:</p>

<ul>
      <li>8086  - 4  байт;
      <li>80286 - 8  байт;
      <li>80386 - 16 байт...   
</ul>

и пр.

  <p>  Кто знает, какой длины будет очередь процессора в "сиксти-
умах" и "севентиумах"?  Модифицируя код впереди себя, подстрахуйтесь 
- сбросьте очередь командой "холостого" перехода:
</p>
<pre>
       mov word ptr Int21, 021CDh
       jmp Int21
Int21: nop
       nop
</pre>

  <i>  (А. Щербаков. Защита от копирования.-М.: Эдель, 1992 )</i>
  
<p>
    5. Оформляйте код своего вируса аккуратно и красиво.  Помните,  
    рано или поздно Ваш вирус будет пойман и  отправлен  на
"вскрытие". Так уж позаботьтесь о внешнем виде своей "публикации".
</p>
<p>
    Уверяю Вас, код вируса с многочисленными переходами в разных направлениях, 
    с "оборванными концами" нереализованных процедур   и   пр.,   ненамного  
    усложняет  процесс  исследования
алгоритма, зато вызывает брезгливое чувство,  сходное  с  тем,
какое возникает при виде заляпанной кляксами и жирными пальцами, криво и 
безграмотно заполненной ученической тетради.
</p>

<p>    
Если Вы  не уважаете весь остальной мир,  то хоть уважайте
себя.
</p>
<p>
    6. Лучший способ проверки "качества"  вируса  -  запустите
его на собственной машине.  Ах, Вы боитесь? Вы не предполагаете,  
к каким повреждениям это может привести, и не знаете, как
от своего "детища" избавиться?
</p>
<p>
    Тогда займитесь лучше "разведением опенков в  сухой  местности".  
Вам  противопоказано  писать вирусы и программировать
вообще. Извините, конечно, но это суровая правда :-)
</p>

<hr>
<p>
(с) Constantin E. Climentieff aka DrMad,<br>
<a href="mailto:drmad@dr.com"> mailto: drmad@dr.com</a> * 
<a href="http://www.chat.ru/~drmad">http://www.chat.ru/~drmad</a>
</p>


    </td>
    </tr>
    </table>
    </td>

    <td width="15%" height="100%" bgcolor="#60C0C0"></td>
</tr>
</table>

</body>
</html>

